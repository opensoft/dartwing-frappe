# Dartwing-Frappe DevContainer Setup

This repository contains the **development environment configuration** for Dartwing Frappe projects.

## What's in Git (Version Controlled)

```
dartwing-frappe/
├── .devcontainer/               # DevContainer configuration
│   ├── Dockerfile              # Development image
│   ├── docker-compose.yml      # Multi-container setup (MariaDB, Redis, etc.)
│   ├── devcontainer.json       # VSCode settings
│   ├── setup-frappe.sh         # Auto-setup Frappe bench
│   ├── setup-dartwing.sh       # Auto-setup Dartwing app
│   ├── nginx.conf              # Nginx config (optional)
│   ├── .env.example            # Environment template
│   └── README.md               # Setup documentation
├── .warp/                      # Warp AI instructions
├── .gitignore                  # Ignore runtime files
└── README.md                   # Project overview
```

## What's Generated (Not in Git)

```
dartwing-frappe/
├── .devcontainer/.env          # Local secrets (gitignored)
└── development/                # ENTIRE runtime directory (gitignored)
    └── frappe-bench/           # Generated by bench init
        ├── apps/
        │   ├── frappe/         # Cloned from frappe/frappe
        │   └── dartwing/       # Cloned from opensoft/frappe-app-dartwing
        ├── sites/
        │   ├── dartwing.localhost/
        │   └── common_site_config.json
        ├── env/                # Python virtualenv
        ├── config/             # Runtime configuration
        ├── logs/               # Application logs
        └── ...
```

## First Time Setup (Team Members)

### 1. Clone this repo
```bash
git clone <dartwing-frappe-repo-url>
cd dartwing-frappe
```

### 2. Open in VSCode
```bash
code .
```

### 3. Reopen in Container
- Click "Reopen in Container" when prompted
- Wait 5-10 minutes for first-time setup
- Automatic actions:
  - `bench init frappe-bench` (creates development/ directory)
  - `bench get-app git@github.com:opensoft/frappe-app-dartwing.git`
  - `bench new-site dartwing.localhost`
  - `bench --site dartwing.localhost install-app dartwing`

### 4. Start Development
```bash
cd development/frappe-bench
bench start
```

Access: http://localhost:8000

## Subsequent Runs

The `development/` directory persists between container rebuilds (Docker volume), so setup only runs once.

If you need to start fresh:
```bash
# Delete development directory
rm -rf development/

# Rebuild container
# VSCode: Cmd/Ctrl+Shift+P -> "Dev Containers: Rebuild Container"
```

## App Development Workflow

### Working on Dartwing App
```bash
# Code is in development/frappe-bench/apps/dartwing/
cd development/frappe-bench/apps/dartwing

# This is a git repo (cloned from GitHub)
git status
git checkout -b feature/new-feature

# Make changes, commit, push
git add .
git commit -m "Add new feature"
git push origin feature/new-feature
```

### Working on Frappe Core
If contributing to Frappe itself:
```bash
cd development/frappe-bench/apps/frappe
# Fork frappe/frappe on GitHub first
git remote add origin git@github.com:your-username/frappe.git
git remote add upstream https://github.com/frappe/frappe.git
```

## Key Principles

✅ **Bench repo tracks**: Environment setup, Docker configs, scripts
✅ **App repos track**: Application code (cloned into apps/)
✅ **Runtime files ignored**: development/, logs, caches, secrets

❌ **Never commit**: 
- `development/` directory
- `.devcontainer/.env`
- Database files, logs, caches

## Related Repositories

- **This repo**: Bench/DevContainer setup for Dartwing
- **opensoft/frappe-app-dartwing**: Dartwing Frappe application code
- **frappe/frappe**: Core Frappe framework

## Troubleshooting

See `.devcontainer/README.md` for detailed troubleshooting.
